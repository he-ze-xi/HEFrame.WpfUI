<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:HEFrame.Styles.Controls" xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <sys:Double x:Key="SliderThumbWidth">15</sys:Double>
    <sys:Double x:Key="SliderThumbHeight">15</sys:Double>
    <sys:Double x:Key="TickBarWidth">4</sys:Double>
    <sys:Double x:Key="TickBarHeight">4</sys:Double>

    <!--  RepeatButton  -->
    <Style x:Key="HESliderRepeatButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Border Background="{DynamicResource TransparentBackground}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  Thumb  -->
    <Style x:Key="HESliderThumb" TargetType="{x:Type Thumb}">
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Width" Value="{DynamicResource SliderThumbWidth}" />
        <Setter Property="Height" Value="{DynamicResource SliderThumbHeight}" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid>
                        <Ellipse x:Name="Ellipse" Fill="{Binding RelativeSource={RelativeSource AncestorType=controls:HESlider}, Path=ThumbBrush}" Opacity="1" Stretch="Fill">
                            <Ellipse.RenderTransform>
                                <ScaleTransform />
                            </Ellipse.RenderTransform>
                        </Ellipse>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Ellipse" Property="Opacity" Value="0.7" />
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.12" Duration="0:0:0.167" />
                                        <DoubleAnimation Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.12" Duration="0:0:0.167" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="RenderTransform.ScaleX" To="1" Duration="0:0:0.167" />
                                        <DoubleAnimation Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="RenderTransform.ScaleY" To="1" Duration="0:0:0.167" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                        <Trigger Property="IsDragging" Value="True">
                            <Setter TargetName="Ellipse" Property="Opacity" Value="0.7" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Ellipse" Property="Opacity" Value="0.56" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  Horizontal Slider  -->
    <ControlTemplate x:Key="HorizontalHESliderTemplate" TargetType="{x:Type controls:HESlider}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <TickBar x:Name="TopTick" Height="{DynamicResource TickBarHeight}" Fill="{TemplateBinding Foreground}" Placement="Top" SnapsToDevicePixels="True" Visibility="Collapsed" />
            <Border x:Name="BackBorder" Grid.Row="1" Height="{DynamicResource TickBarHeight}" Margin="0" Background="{TemplateBinding Background}" BorderThickness="0" CornerRadius="4" />
            <Track x:Name="PART_Track" Grid.Row="1">
                <Track.DecreaseRepeatButton>
                    <RepeatButton Command="Slider.DecreaseLarge">
                        <RepeatButton.Style>
                            <Style TargetType="{x:Type RepeatButton}">
                                <Setter Property="IsTabStop" Value="False" />
                                <Setter Property="Focusable" Value="False" />
                                <Setter Property="Cursor" Value="Hand" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type RepeatButton}">
                                            <Border Height="{DynamicResource TickBarHeight}" Background="{Binding RelativeSource={RelativeSource AncestorType=controls:HESlider}, Path=ThumbBrush}" CornerRadius="{Binding RelativeSource={RelativeSource AncestorType=controls:HESlider}, Path=RepeatButtonBorderCornerRadius}" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </RepeatButton.Style>
                    </RepeatButton>
                </Track.DecreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource HESliderThumb}" />
                </Track.Thumb>
                <Track.IncreaseRepeatButton>
                    <RepeatButton Command="Slider.IncreaseLarge" Style="{StaticResource HESliderRepeatButton}" />
                </Track.IncreaseRepeatButton>
            </Track>
            <TickBar x:Name="BottomTick" Grid.Row="2" Height="{DynamicResource TickBarHeight}" Fill="{TemplateBinding Foreground}" Placement="Bottom" SnapsToDevicePixels="True" Visibility="Collapsed" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="TickPlacement" Value="TopLeft">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="TickPlacement" Value="BottomRight">
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="TickPlacement" Value="Both">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible" />
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <!--  Vertical Slider  -->
    <ControlTemplate x:Key="VerticalHESliderTemplate" TargetType="{x:Type controls:HESlider}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>
            <TickBar x:Name="LeftTick" Width="{DynamicResource TickBarWidth}" Fill="{TemplateBinding Foreground}" Placement="Left" SnapsToDevicePixels="True" Visibility="Collapsed" />
            <Border x:Name="BackBorder" Grid.Column="1" Width="{DynamicResource TickBarWidth}" Margin="0" Background="{TemplateBinding Background}" BorderThickness="0" CornerRadius="4" />
            <Track x:Name="PART_Track" Grid.Column="1">
                <Track.DecreaseRepeatButton>
                    <RepeatButton Command="Slider.DecreaseLarge">
                        <RepeatButton.Style>
                            <Style TargetType="{x:Type RepeatButton}">
                                <Setter Property="IsTabStop" Value="False" />
                                <Setter Property="Focusable" Value="False" />
                                <Setter Property="Cursor" Value="Hand" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type RepeatButton}">
                                            <Border Width="{DynamicResource TickBarWidth}" Background="{Binding RelativeSource={RelativeSource AncestorType=controls:HESlider}, Path=ThumbBrush}" CornerRadius="{Binding RelativeSource={RelativeSource AncestorType=controls:HESlider}, Path=RepeatButtonBorderCornerRadius}" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </RepeatButton.Style>
                    </RepeatButton>
                </Track.DecreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource HESliderThumb}" />
                </Track.Thumb>
                <Track.IncreaseRepeatButton>
                    <RepeatButton Command="Slider.IncreaseLarge" Style="{StaticResource HESliderRepeatButton}" />
                </Track.IncreaseRepeatButton>
            </Track>
            <TickBar x:Name="RightTick" Grid.Column="2" Width="{DynamicResource TickBarWidth}" Fill="{TemplateBinding Foreground}" Placement="Right" SnapsToDevicePixels="True" Visibility="Collapsed" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="TickPlacement" Value="TopLeft">
                <Setter TargetName="LeftTick" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="TickPlacement" Value="BottomRight">
                <Setter TargetName="RightTick" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="TickPlacement" Value="Both">
                <Setter TargetName="LeftTick" Property="Visibility" Value="Visible" />
                <Setter TargetName="RightTick" Property="Visibility" Value="Visible" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <Style x:Key="HESliderStyle" TargetType="{x:Type controls:HESlider}">
        <Setter Property="Orientation" Value="Horizontal" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="FontSize" Value="{DynamicResource HEUIFontSize}" />
        <Setter Property="Foreground" Value="{DynamicResource LightForeground}" />
        <Setter Property="Background" Value="{DynamicResource DarkBackground}" />
        <Setter Property="ThumbBrush" Value="{DynamicResource PrimaryBackground}" />
        <Setter Property="RepeatButtonBorderCornerRadius" Value="4 0 0 4" />
        <Style.Triggers>
            <Trigger Property="ThemeType" Value="Dark">
                <Setter Property="Foreground" Value="{DynamicResource LightForeground}" />
                <Setter Property="Background" Value="{DynamicResource DarkBackground}" />
            </Trigger>
            <Trigger Property="ThemeType" Value="Light">
                <Setter Property="Foreground" Value="{DynamicResource DarkForeground}" />
                <Setter Property="Background" Value="{DynamicResource LightBackground}" />
            </Trigger>
            <Trigger Property="Orientation" Value="Horizontal">
                <Setter Property="MaxHeight" Value="23" />
                <Setter Property="MinWidth" Value="104" />
                <Setter Property="Template" Value="{StaticResource HorizontalHESliderTemplate}" />
            </Trigger>
            <Trigger Property="Orientation" Value="Vertical">
                <Setter Property="MaxWidth" Value="23" />
                <Setter Property="MinHeight" Value="104" />
                <Setter Property="Template" Value="{StaticResource VerticalHESliderTemplate}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.56" />
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="Orientation" Value="Horizontal" />
                    <Condition Property="IsDirectionReversed" Value="False" />
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter Property="RepeatButtonBorderCornerRadius" Value="4 0 0 4" />
                </MultiTrigger.Setters>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="Orientation" Value="Horizontal" />
                    <Condition Property="IsDirectionReversed" Value="True" />
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter Property="RepeatButtonBorderCornerRadius" Value="0 4 4 0" />
                </MultiTrigger.Setters>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="Orientation" Value="Vertical" />
                    <Condition Property="IsDirectionReversed" Value="False" />
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter Property="RepeatButtonBorderCornerRadius" Value="0 0 4 4" />
                </MultiTrigger.Setters>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="Orientation" Value="Vertical" />
                    <Condition Property="IsDirectionReversed" Value="True" />
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter Property="RepeatButtonBorderCornerRadius" Value="4 4 0 0" />
                </MultiTrigger.Setters>
            </MultiTrigger>
        </Style.Triggers>
    </Style>

    <Style BasedOn="{StaticResource HESliderStyle}" TargetType="{x:Type controls:HESlider}" />
</ResourceDictionary>