<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:HEFrame.Styles.Controls" xmlns:cv="clr-namespace:HEFrame.Styles.Converters">

    <cv:BoolToVisibility x:Key="BoolToVisibility" />

    <Style x:Key="HETitleBarStyle" TargetType="{x:Type controls:HETitleBar}">
        <Setter Property="MinHeight" Value="40" />
        <Setter Property="Background" Value="#202020" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:HETitleBar}">
                    <Grid x:Name="PART_MainGrid" Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="auto" />
                        </Grid.ColumnDefinitions>
                        <ContentControl Margin="{TemplateBinding Padding}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content="{TemplateBinding Header}" />
                        <StackPanel Grid.Column="1" HorizontalAlignment="Right" Orientation="Horizontal">
                            <controls:HEPopup Content="{TemplateBinding MorePopupContent}" ThemeType="Light" Visibility="{TemplateBinding ShowMoreBox, Converter={StaticResource BoolToVisibility}}" />
                            <controls:HEButton x:Name="PART_MinButton" ButtonType="Light" Style="{DynamicResource HEMinButtonStyle}" Visibility="{TemplateBinding ShowMinBox, Converter={StaticResource BoolToVisibility}}" />
                            <controls:HEButton x:Name="PART_MaxButton" ButtonType="Light" Style="{DynamicResource HEMaxButtonStyle}" Visibility="{TemplateBinding ShowMaxBox, Converter={StaticResource BoolToVisibility}}" />
                            <controls:HEButton x:Name="PART_CloseButton" ButtonType="Light" Style="{DynamicResource HECloseButtonStyle}" Visibility="{TemplateBinding ShowCloseBox, Converter={StaticResource BoolToVisibility}}" />
                        </StackPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="ThemeType" Value="Dark">
                <Setter Property="Background" Value="#202020" />
            </Trigger>
            <Trigger Property="ThemeType" Value="Light">
                <Setter Property="Background" Value="#FAFAFA" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style BasedOn="{StaticResource HETitleBarStyle}" TargetType="{x:Type controls:HETitleBar}" />
</ResourceDictionary>